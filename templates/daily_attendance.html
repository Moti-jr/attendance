{% extends "main.html" %}
{%load static%}
{% block content %}
<style>
    @import url(https://fonts.googleapis.com/css?family=Roboto:400,500,300,700);

    .centered-table-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px;

    }

    .centered-table {
        width: 100%;
        max-width: 1000px; /* Adjust max-width as needed */
        padding: 10px;
    }

    .centered-table img {
        display: block;
        margin: 0 auto 500px; /* Center and add margin below the image */
        max-width: 50px; /* Adjust the max-width as needed */
        height: auto;
    }

    .centered-table h2 {
        text-align: center;
        margin-bottom: 20px;
    }

    img {
        width: 150px;

    }

    * {
        font-family: Roboto, serif;
        padding: 0;
        margin: 0;
        box-sizing: border-box;
    }

    section {
        width: 100%;
        display: inline-block;
        background: #ccc;
        height: 60vh;
        text-align: center;
        font-size: 22px;
        font-weight: 700;
        text-decoration: underline;
    }

    html, body {
        height: 100%;
        margin: 0;
    }

    form {
        display: flex;
        float: left;
        align-content: flex-start;
    }
    h3{
        text-align: left;
        text-transform: uppercase;
    }
    td{
        text-transform: uppercase;
    }

    /* If you don't want the footer to be responsive, remove these media queries */
    footer {
        width: 100%;
        text-align: center;
        background-color: #cf3333; /* Optional: Add a background color for the footer */
    }

</style>
</head>

</head>
<body>
<div class="container mt-4 centered-table-container">


    <table class="table table-bordered border-primary table-hover table-center">
        <img src="{% static 'main_app/images/hudumalogo.jpeg' %}" alt="not found"/>
        <h2>NANDI HUDUMA ATTENDANCE</h2>

        <!-- Search Form -->
        <form method="get" action="">
            <div class="d-flex">
                <input type="date" name="search_date" class="form-control me-2 mb-2 " placeholder="Select a date"
                       required>
                <button class="btn btn-primary mb-2 " type="submit">Search</button>
            </div>
            {% for date, attendances in grouped_attendance.items %}
            <h3>{{ date|date:"l, M j, Y" }}</h3>

            <thead>
            <tr>
                <th>#</th>
                <th>NAME</th>
                <th>ID NUMBER</th>
                <th>MDA</th>
                <th>CHECK IN TIME</th>
                <th>CHECK OUT TIME</th>
            </tr>
            </thead>
            <tbody>
            {% for attendance in attendances %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ attendance.user.name }}</td>
                <td>{{ attendance.user.id_number }}</td>
                <td>{{ attendance.user.mda }}</td>
                <td>{{ attendance.check_in_time|date:"H:i:s"|default:"Not Checked In" }}</td>
                <td>{{ attendance.check_out_time|date:"H:i:s"|default:"Not Checked Out" }}</td>
            </tr>
            {% endfor %}
            </tbody>

            {% if date == today %}
            <tfoot>
            <tr>
                <td colspan="4"><strong>Total Checked In Today:</strong></td>
                <td colspan="2"><strong>{{ attendances|length }}</strong></td>
            </tr>
            </tfoot>
            {% endif %}
    </table>
    {% empty %}
    <p>No attendance records available for the selected date.</p>
    {% endfor %}
</div>


<!-- Pagination controls -->
<footer>
    <div class="row"
         style="font-size:14px;padding-left: 5px; margin-left: 0; margin-right: 0; height:auto; font-weight:bold; text-align: center;justify-content: center; color: #ffffff; border-width: 1px; border-color: #000000; border-style: solid; width: 100%; background-color: #e80101;">
        Huduma Kenya Secretariat &copy; 2020 - 2024. All Rights Reserved.<br>
        Designed by <label style="color:#BCE954;" onclick="javascript:gotosite();">Huduma Kenya Secretariat.</label><br>
        <label style="color:#BCE954;" onclick="javascript:getterms();">Terms and Conditions</label>
    </div>
</footer>
<!---->
{% endblock %}
{% block title %} Attendance{% endblock %}